# 2장. 객체 생성과 파괴

## 아이템 1. 생성자 대신 정적 팩터리 메서드를 고려하라

클라이언트가 클래스의 인스턴스를 얻는 수단

- public 생성자
- 정적 팩터리 메서드 (static factory method)

### 정적 팩토리 메서드의 장점

- **이름을 가질 수 있다.**
  - 생성자에 넘기는 매개변수와 생성자 자체만으로 반환될 객체의 특성을 제대로 설명하지 못하는데,
  - 정적팩토리는 이름을 잘 지으면 객체의 특성 파악 가능
  - 시그니처가 같은 생성자가 여러 개 필요할 것 같으면, 생성자를 정적 팩터리 메소드로 바꾸고 각 이름을 지어주자
- **호출될 때마다 인스턴스를 새로 생성하지는 않아도 된다.**
  - 미리 만들거나, 인스턴스를 캐싱하여 재활용 가능
  - 같은 객체가 자주 요청되면 성능 향상 가능 (플라이웨이트 패턴도 이와 유사)
  - 언제 어느 인스턴스를 살아있게 할지 통제 가능 (인스턴스 통제 클래스라고 한다)
    - 인스턴스를 통제하면?
      - 싱글톤으로 만들 수 있으며, 
        인스턴스화 불가로 만들 수 있다.
      - 불변값 클래스(아이템 17)에서 동치인 인스턴스가 단 하나뿐임을 보장할 수 있다.
- **반환 타입의 하위 타입 객체를 반환할 수 있는 능력**
  - 유연성 제공
    - 구현 클래스를 공개하지 않고도 객체를 반환할 수 있어 API 작게 유지 가능
      - 인터페이스를 정적 팩토리 메서드의 반환 타입으로 사용하는 인터페이스 기반 프레임워크(아이템 20) 와도 연관
- **입력 매개변수에 따라 매번 다른 클래스의 객체를 반환할 수 있다.**
  - 반환 타입의 하위타입이기만 하면 어떤 클래스의 객체를 반환해도 된다
- **정적 팩토리 메서드를 작성하는 시점에는 반환할 객체의 클래스가 존재하지 않아도 된다**



### 정적 팩토리 메서드의 단점

- 상속을 하려면 public 이나 protected 생성자가 필요하니 정적 팩토리 메서드만 제공하면 하위 클래스 만들 수 없다
- 정적 팩토리 메서드는 프로그래머가 찾기 어렵다
  - 정적 팩토리 메소드 명명방식
    - from : 매개변수 받아서 해당 타입의 인스턴스 반환하는 형변환 메서드
      - `Date d = Date.from(instant);`
    - of : 여러 매개변수를 받아 적합한 타입의 인스턴스를 반환하는 집계 메소드
      - `Set<Rank> faceCards = Enumset.of(JACK, QUEEN, KING);`
    - valueOf : from 과 of 의 자세한 버전
      - `BigInteger prime = BigInteger.valueOf(Integer.MAX_VALUE);`
    - ...

